# JavaScript Design Patterns

## # Command Pattern

> 命令模式是一种行为设计模式，它以命令的形式将任务的执行方与调用方解耦。

### 1. 应用场景

- 对任务进行排队、调度或远程执行
- 实现可逆操作

### 2. 优缺点

#### 优点

- `单一职责原则`：将任务执行方与调用方解耦
- `开闭原则`：增加新命令时，只需要新增命令类，无需修改调用方代码
- 调度任务的执行时机：延迟执行、异步执行、优先级控制、undo/redo等
- 组合：可以将一组简单的命令组合成一个复杂的命令

#### 缺点

- 执行方与调用方之间新引入了命令层，增加了系统复杂度
- 使用场景比较有限

### 3. 与其他设计模式的关系

- 请求处理方式方式
    - 命令模式：将请求封装为命令对象，在发送者与接受者之间单项传输
    - 责任链模式：按顺序将请求动态传递给一系列的潜在接收者， 直至其中一名接收者对请求进行处理
    - 中介者模式：移除了发送者和接收者的直接连接， 强制通过一个中介对象进行间接沟通
    - 观察者模式：允许接收者动态地订阅/取消对请求的接收

// TODO: FIXME: 补充
- 基于命令模式实现责任链
    - 责任链中的handler可实现为命令。从而能够对同一上下文对象执行许多不同的操作
    - 另外，可以将请求自身实现为命令对象。 这样可以对由一系列不同上下文连接而成的链执行相同的操作。

- 实现撤销逻辑操作时，可以同时使用命令模式与备忘录模式，其中命令模式负责执行各种操作，备忘录负责保存命令执行前的状态

- 原型模式可用于保存命令的历史记录

- 命令模式与策略模式都可以通过一些行为参数化对象，但两者意图不同。
    - 命令模式可以将任何操作转换为对象，操作参数作为对象的成员变量。进而可以通过转换来延迟执行、进行操作调度、 保存历史命令或者向远程服务发送命令等
    - 策略模式通常用于描述完成某件事的不同方式，从而能够在同一个上下文类中切换算法

- 可以将访问者模式视为命令模式的增强， 其对象可以对不同类的多种成员对象执行操作

### 4. 代码示例

```js
// 命令模式
```

## # Factory Method Pattern

> 工厂模式是一种创建型设计模式，它提供了一种创建对象的方法，允许调用方决定实例化对象的类型。

### 1. 应用场景

- 创建对象的类型不明确或不固定
- 需要创建大量相似对象
---

*本文参考整理自 [patterns/vanilla](https://www.patterns.dev/vanilla) 及 [design-patterns](https://refactoringguru.cn/design-patterns)。*

https://dev.to/this-is-learning/patterns-for-building-javascript-websites-in-2022-5a93